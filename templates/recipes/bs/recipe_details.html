{% extends "base.html" %} {% block title %}Create Recipe{% endblock %} {% block content %}

<div class="p-2 p-lg-3 p-xl-5">
  <!-- Recipe information -->
  <div class="mb-3 mb-lg-4">
    <!-- Recipe details-->

    <div class="d-flex flex-column flex-lg-row g-4">
      <!-- Left / Top part: Recipe info (on large screens: left side, on small: top) -->
      <div class="col-12 col-md-12 col-lg-9">
        <div class="card border-0 rounded-4 overflow-hidden bg-white">
          <!-- first line -->
          <div class="row mb-2 mb-lg-3 px-4 pt-4">
            <div class="col-12 me-auto">
              <div id="recipeName" class="fs-1 fw-bold"></div>
            </div>
          </div>

          <!-- second line -->
          <div class="d-flex flex-column flex-lg-row mb-2 mb-lg-3 px-4">
            <div class="d-flex col-9 fs-4 align-items-end">
              <div class="fs-4 pe-4 fw-semibold">Portion Size:</div>
              <div id="portionSize" class="fs-5"></div>
            </div>

            <div id="privacyButton" class="d-flex col-3 pt-1 pt-lg-0"></div>
          </div>

          <!-- third line -->
          <div class="px-4 pb-4">
            <label for="description" class="fs-4 fw-semibold d-block mb-2">Description :</label>
            <div id="description" class="fs-5 text-muted"></div>
          </div>
        </div>
      </div>

      <!-- Right / Bottom part: Image (on large: right side, on small: below) -->
      <div class="ps-3 ps-lg-0 col-12 col-md-4 col-lg-3">
        <div class="card border-0 rounded-4 overflow-hidden bg-white h-0">
          <div class="ratio ratio-1x1">
            <!-- 
              You can put <img> here or use background-image
              Example with img tag:
            -->
            <img 
              id="recipeImage" 
              src="" 
              alt="Recipe image" 
              class="object-fit-cover w-50 h-50" 
              style="display: none;" <!-- hidden until image is loaded -->
            >
            
            <!-- Optional placeholder when no image -->
            <div class="d-flex align-items-center justify-content-center bg-light text-muted fs-5">
              No image
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Action Buttons (Owner only) -->
  <div id="ownerButtons" class="d-flex justify-content-between align-items-center mb-4"></div>

  <!-- ingredients and steps information -->
  <div class="mb-3 mb-lg-4">
    <!-- tabs for ingredients and steps -->
    <ul class="nav nav-tabs d-flex recipe-tabs ">
      <li class="nav-item flex-fill">
        <a class="nav-link active ingredient-tabs" data-tab="ingredient-tabs" aria-current="page"
          >Ingredients</a
        >
      </li>
      <li class="nav-item flex-fill">
        <a class="nav-link step-tabs" data-tab="step-tabs" aria-current="page">Steps</a>
      </li>
    </ul>

    <div class="p-2 tab-page shadow">
      <!-- INGREDIENTS tab page -->
      <div id="ingredients-tab">
        <!--  section to add button to add first row for component & Total cost of recipe -->
        <div class="d-flex justify-content-end mb-2">
          <div class="fs-3 pe-5">Cost: Â£ <span id="totalCost">0.00</span></div>
        </div>

        <!-- ingredients details in table-->
        <div class="">
          <table id="recipeList" class="table table-bordered table-hover table-fixed">
            <colgroup>
              <col style="width: 25%" />
              <!-- Ingredient name -->
              <col style="width: 10%" />
              <!-- Quantity input -->
              <col style="width: 10%" />
              <!-- Unit select -->
              <col style="width: 8%" />
              <!-- Price override input -->
              <col style="width: 10%" />
              <!-- Base Quantity -->
              <col style="width: 10%" />
              <!-- Base Unit -->
              <col style="width: 12%" />
              <!-- Base Price -->
            </colgroup>

            <thead class="table-dark">
              <tr>
                <th>Ingredient</th>
                <th>Quantity</th>
                <th>Unit</th>
                <th>Price</th>
                <th>Base Quantity</th>
                <th>Base Unit</th>
                <th>Base Price</th>
              </tr>
            </thead>

            <tbody id="ingredients-tbody"></tbody>
          </table>
        </div>
      </div>

      <!-- STEPS tab page -->
      <div id="steps-tab" style="display: none">
        <div class="fs-4 mb-2">Recipe Prodecure</div>

        <div>
          <table id="stepsTable" class="table table-bordered table-hover table-fixed p-3">
            <colgroup>
              <col style="width: 4%" />
              <!-- Sr No -->
              <col style="width: 70%" />
              <!-- Steps Description -->
              <!-- <col style="width: 12%" /> -->
              <!-- time -->
            </colgroup>

            <thead class="d-none">
              <tr>
                <th>Step.</th>
                <th>Step Description</th>
                <!-- <th>Time</th> -->
              </tr>
            </thead>

            <tbody id="steps-tbody"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Error message -->
  <div id="error" class="text-danger mt-3"></div>
</div>

{% include "recipes/bs/_delete_component_modal.html" %} {% include
"recipes/bs/_create_dish_modal.html" %} {% endblock %} {% block scripts %}
<!-- Page Script -->
<script type="module" src="/static/js/features/recipes/read-recipe-bs.js"></script>
{% endblock %}
